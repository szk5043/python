## 三、名称空间与作用域

### 一、名称空间

#### 1、概述

什么是名称空间(Namespace)？

名称空间就是用来存放名字与值内存地址绑定关系的地方(内存空间)

#### 2、名称空间的分类

- 内置名称空间(Built-in)：存放的是Python解释器自带的名字
- 全局名称空间(Global)：存在的是文件级别的名字
- 局部名称空间(Local)：在函数内定义的名字

#### 3、名称空间的生命周期

- 内置名称空间：在解释器启动时则生效，解释器关闭则失效
- 全部名称空间：在解释器执行python文件时则生效，文件执行完毕后则失效
- 局部名称空间：只在调用函数时临时产生改函数的局部名称空间，该函数调用完就失效

#### 4、名称空间的加载顺序

内置 —> 全局 —> 局部

查找名字的顺序: （基于当前所在位置往上查找）
- 假设当前站在局部,查找顺序:局部->全局->内置
- 假设当前站在全局,查找顺序:全局->内置
### 二、作用域

#### 1、作用域即范围LEGB

程序语言中需要声明变量，变量的作用范围称为作用域，根据作用域的不同又分为：

- Built-in：内置作用域 - 所有文件所有地方都可以被访问
- Global：全局作用域 - 在当前文件的所有位置
- Enclosing：嵌套作用域 - 自身内部与内部的子函数
- Local：局部作用域 - 只有自身内部


#### 2、局部变量

局部变量：指局部生效，定义在函数模块内的变量只能在函数里面生效，函数模块之外无法使用。这个函数就是这个变量的作用域。

##### 示例1：局部变量

```python
def change_name(name):
    print("before change: ",name)
    name='SZK'   #这个函数就是这个变量的作用域
    print("after change: ",name)
 
name = "wesley"
print("---------调用change_name---------")
change_name(name)
print("---------打印name---------")
print(name)
 
'''
#返回值：
---------调用change_name---------
before change:  wesley
after change:  SZK                 #局部变量生效
---------打印name---------
wesley
'''
```

#### 3、全局变量

全局变量：在整个程序中而不是函数中生效的变量，在代码的顶层声明。这个程序就是这个变量的作用域。

##### 示例1：全局变量

```python
school="Oldboy edu"    #定义全局变量
 
def test_1():
    print("school:",school)
 
def test_2():
    school='Alex python'     #定义局部变量
    print("school:",school)
 
print("-------test_1-------")
test_1()
print("-------test_2-------")
test_2()

'''
#返回值：
-------test_1-------
school: Oldboy edu     #全局变量
-------test_2-------
school: Alex python    #局部变量
'''
```

>  从上面的例子可以看出**全局变量的优先级低于局部变量**，当函数模块内没有局部变量，才会去找全局变量。那如果想要将局部变量声明成全局变量呢？

##### 示例2：将局部变量声明为全局变量

```python
school="Oldboy edu"
 
def test_1():
    global school
    school='Alex python'
    print("school:",school)
 
print("-------打印局部变量-------")
test_1()
print("-------打印全局变量-------")
print("school: ",school)

'''
#返回值：
-------打印局部变量-------
school: Alex python
-------打印全局变量-------
school:  Alex python      #局部变量声明成全局变量
'''
```

##### 示例3：将列表声明为全局变量，进行修改操作

```python
list = ['name','jesus']
 
def test_1():
    list[1]='God'
    print(list)
 
print("-------打印局部变量-------")
test_1()
print("-------打印全局变量-------")
print(list)
 
'''
#返回值：
-------打印局部变量-------
['name', 'God']
-------打印全局变量-------
['name', 'God']
'''
```

> 列表list被声明成全局变量，同时被重新赋值了。字符串和整数是不可以修改的，如果需要修改，需要在函数里面声明global；但是其他的数据类型，如列表（list）、字典（dict）、集合（set），包括我们后面即将要学的类（class）都是可以修改的。

#### 4、总结

- 名称空间可以是变量、函数

- 在函数中定义的变量称为局部变量，在程序顶层定义的变量称为全局变量
- 全局变量的作用域是整个程序，局部变量的作用域是定义该变量的函数
- 当全局变量和局部变量同名时：在定义局部变量的函数中，局部变量起作用；在其他地方，全局变量起作用
